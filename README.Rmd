---
output: github_document
---

# __tRiviascoRe__: a package to score teams during the useR2021 tRivia event

To install and load the package use:

```{r, eval=F}
remotes::install_github("saramortara/tRiviascoRe")
library(tRiviascoRe)
```

```{r, echo=F, message=FALSE}
devtools::load_all()
```


```{r, message=FALSE}
library(tidyr)
library(dplyr)
library(readr)
library(gsheet)
```

## What do you need?

1. A Google form with multiple choice questions. All questions must have unique names

2. A reference data frame with two or three columns: `question_name`, `correct_answer` and `round` (optional)

3. The answers from the google form

## Example

Provide a path to spreadsheet that is the output of a google form

```{r, message=F}
# Path to the google form
data <- "https://docs.google.com/spreadsheets/d/1yDHG41aGnb2hEUEKo6gmsoeWIBaQuv6uf-tDE0J4XbI/edit?usp=sharing"
data <- read_csv(construct_download_url(data))

# Vector of scores for each round
score = c(2, 3, 4, 10)

```


Provide a reference template with the answers

```{r}
# Correct answers
ref <- data.frame(question_name = names(select(data, starts_with("What"))),
                  correct_answer = c("George Clooney", 
                                     "Marlon Brando", 
                                     "Al Pacino", 
                                     "Robert De Niro"),
                  round = c(1, 2, 3, 3))
```



Running the function to get the score for each team

```{r}
score_list <- list()

for (j in unique(ref$round)) {
  ref_round <- filter(ref, round == j)
  n_round <- j
  score_val <- score[n_round]
  score_list[[j]] <- score_trivia(data, n_round, score_val, ref)
  
}

score_list
```



